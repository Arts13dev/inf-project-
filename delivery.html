<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Crafty Corner - Order Confirmed</title>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      rel="stylesheet"
      as="style"
      onload="this.rel='stylesheet'"
      href="https://fonts.googleapis.com/css2?display=swap&amp;family=Noto+Sans%3Awght%40400%3B500%3B700%3B900&amp;family=Work+Sans%3Awght%40400%3B500%3B700%3B900"
    />
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <style>
      /* Ensure the body takes up the full viewport height */
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
      body {
        font-family: "Work Sans", "Noto Sans", sans-serif;
      }
    </style>
  </head>
  <body class="bg-white">
    <!-- Main container for the entire page -->
    <div class="relative flex size-full min-h-screen flex-col group/design-root overflow-x-hidden">
      <!-- Header section -->
      <header class="flex items-center justify-between whitespace-nowrap border-b border-solid border-b-[#f4f0f0] px-6 md:px-10 py-3">
        <!-- Logo and brand name -->
        <div class="flex items-center gap-2 text-[#181111]">
          <div class="size-6">
            <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
              <g clip-path="url(#clip0_6_319)">
                <path
                  d="M8.57829 8.57829C5.52816 11.6284 3.451 15.5145 2.60947 19.7452C1.76794 23.9758 2.19984 28.361 3.85056 32.3462C5.50128 36.3314 8.29667 39.7376 11.8832 42.134C15.4698 44.5305 19.6865 45.8096 24 45.8096C28.3135 45.8096 32.5302 44.5305 36.1168 42.134C39.7033 39.7375 42.4987 36.3314 44.1494 32.3462C45.8002 28.361 46.2321 23.9758 45.3905 19.7452C44.549 15.5145 42.4718 11.6284 39.4217 8.57829L24 24L8.57829 8.57829Z"
                  fill="currentColor"
                ></path>
              </g>
              <defs>
                <clipPath id="clip0_6_319"><rect width="48" height="48" fill="white"></rect></clipPath>
              </defs>
            </svg>
          </div>
          <h2 class="text-[#181111] text-lg font-bold leading-tight tracking-[-0.015em]">Crafty Corner</h2>
        </div>
        <!-- Navigation links and action buttons -->
        <div class="flex flex-1 justify-end gap-4 md:gap-8 items-center">
          <div class="hidden md:flex items-center gap-4 lg:gap-6">
            <a class="text-[#181111] text-sm font-medium leading-normal" href="#">New Arrivals</a>
            <a class="text-[#181111] text-sm font-medium leading-normal" href="#">Shop</a>
            <a class="text-[#181111] text-sm font-medium leading-normal" href="#">About</a>
            <a class="text-[#181111] text-sm font-medium leading-normal" href="#">Contact</a>
          </div>
          <div class="flex gap-2">
            <!-- Search button -->
            <button
              class="flex size-10 cursor-pointer items-center justify-center rounded-lg bg-[#f4f0f0] text-[#181111] transition-colors duration-200 ease-in-out hover:bg-[#e0d9d9]"
            >
              <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" fill="currentColor" viewBox="0 0 256 256">
                <path d="M229.66,218.34l-50.07-50.06a88.11,88.11,0,1,0-11.31,11.31l50.06,50.07a8,8,0,0,0,11.32-11.32ZM40,112a72,72,0,1,1,72,72A72.08,72.08,0,0,1,40,112Z"></path>
              </svg>
            </button>
            <!-- User button -->
            <button
              class="flex size-10 cursor-pointer items-center justify-center rounded-lg bg-[#f4f0f0] text-[#181111] transition-colors duration-200 ease-in-out hover:bg-[#e0d9d9]"
            >
              <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" fill="currentColor" viewBox="0 0 256 256">
                <path d="M230.92,212c-15.23-26.33-38.7-45.21-66.09-54.16a72,72,0,1,0-73.66,0C63.78,166.78,40.31,185.66,25.08,212a8,8,0,1,0,13.85,8c18.84-32.56,52.14-52,89.07-52s70.23,19.44,89.07,52a8,8,0,1,0,13.85-8ZM72,96a56,56,0,1,1,56,56A56.06,56.06,0,0,1,72,96Z"></path>
              </svg>
            </button>
            <!-- Shopping bag button -->
            <button
              class="flex size-10 cursor-pointer items-center justify-center rounded-lg bg-[#f4f0f0] text-[#181111] transition-colors duration-200 ease-in-out hover:bg-[#e0d9d9]"
            >
              <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" fill="currentColor" viewBox="0 0 256 256">
                <path d="M216,40H40A16,16,0,0,0,24,56V200a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A16,16,0,0,0,216,40Zm0,160H40V56H216V200ZM176,88a48,48,0,0,1-96,0,8,8,0,0,1,16,0,32,32,0,0,0,64,0,8,8,0,0,1,16,0Z"></path>
              </svg>
            </button>
          </div>
        </div>
      </header>
      <!-- Main content container -->
      <main class="flex flex-1 justify-center py-5 px-4 md:px-10">
        <div class="layout-content-container flex flex-col max-w-[960px] flex-1">
          <!-- Order confirmation message -->
          <section class="p-4 md:p-6 bg-[#f8f5f5] rounded-xl mb-6">
            <h1 class="text-[#181111] tracking-light text-[28px] md:text-[32px] font-bold leading-tight">Order Confirmation</h1>
            <p id="order-confirm-msg" class="text-[#886364] text-sm md:text-base font-normal leading-normal mt-2">
              Thank you, your order has been placed. You will receive an email confirmation shortly.
            </p>
          </section>

          <!-- Order summary and details -->
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- Order details section -->
            <section class="p-4 bg-white rounded-xl shadow-sm">
              <h3 class="text-[#181111] text-lg font-bold leading-tight tracking-[-0.015em] pb-2">Order Summary</h3>
              <div class="flex justify-between gap-x-6 py-2">
                <p class="text-[#886364] text-sm font-normal leading-normal">Order Number</p>
                <div class="flex items-center gap-2">
                  <p id="order-number" class="text-[#181111] text-sm font-normal leading-normal text-right">#123456789</p>
                  <button id="copy-order" class="text-[#886364] hover:text-[#181111] transition-colors duration-200" title="Copy Order Number">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 256 256">
                      <path d="M216,32H88a16,16,0,0,0-16,16V80H48a16,16,0,0,0-16,16V216a16,16,0,0,0,16,16H168a16,16,0,0,0,16-16V176h32a16,16,0,0,0,16-16V48A16,16,0,0,0,216,32ZM72,80V48H216V160H184V96a16,16,0,0,0-16-16ZM48,96H168V216H48Z"></path>
                    </svg>
                  </button>
                </div>
              </div>
              <div class="flex justify-between gap-x-6 py-2">
                <p class="text-[#886364] text-sm font-normal leading-normal">Order Date</p>
                <p class="text-[#181111] text-sm font-normal leading-normal text-right">July 26, 2024</p>
              </div>
              <div class="flex justify-between gap-x-6 py-2">
                <p class="text-[#886364] text-sm font-normal leading-normal">Estimated Delivery</p>
                <p class="text-[#181111] text-sm font-normal leading-normal text-right">July 30 - August 2, 2024</p>
              </div>
            </section>
            
            <!-- Shipping and Billing section -->
            <section class="p-4 bg-white rounded-xl shadow-sm">
              <h3 class="text-[#181111] text-lg font-bold leading-tight tracking-[-0.015em] pb-2">Shipping Address</h3>
              <p class="text-[#181111] text-sm md:text-base font-normal leading-normal pb-4">
                Sarah Miller<br />
                123 Maple Street<br />
                Anytown, CA 91234
              </p>
              <h3 class="text-[#181111] text-lg font-bold leading-tight tracking-[-0.015em] pb-2">Billing Information</h3>
              <p class="text-[#181111] text-sm md:text-base font-normal leading-normal">
                Payment Method: Credit Card<br />
                Card Ending In: 4242
              </p>
            </section>
          </div>

          <!-- Items purchased section -->
          <section class="mt-6 p-4 bg-white rounded-xl shadow-sm">
            <h3 class="text-[#181111] text-lg font-bold leading-tight tracking-[-0.015em] pb-2">Items Purchased</h3>
            <div class="overflow-x-auto rounded-lg border border-[#e5dcdc] bg-white">
              <table class="w-full">
                <thead class="bg-[#f4f0f0]">
                  <tr>
                    <th class="px-4 py-3 text-left text-[#181111] text-sm font-medium leading-normal min-w-[200px]">Product</th>
                    <th class="px-4 py-3 text-left text-[#181111] text-sm font-medium leading-normal">Quantity</th>
                    <th class="px-4 py-3 text-left text-[#181111] text-sm font-medium leading-normal">Price</th>
                  </tr>
                </thead>
                <tbody>
                  <tr class="border-t border-t-[#e5dcdc]">
                    <td class="px-4 py-2 text-[#181111] text-sm font-normal leading-normal">Handmade Ceramic Mug</td>
                    <td class="px-4 py-2 text-[#886364] text-sm font-normal leading-normal">1</td>
                    <td class="px-4 py-2 text-[#886364] text-sm font-normal leading-normal">$25.00</td>
                  </tr>
                  <tr class="border-t border-t-[#e5dcdc]">
                    <td class="px-4 py-2 text-[#181111] text-sm font-normal leading-normal">Knitted Wool Scarf</td>
                    <td class="px-4 py-2 text-[#886364] text-sm font-normal leading-normal">1</td>
                    <td class="px-4 py-2 text-[#886364] text-sm font-normal leading-normal">$45.00</td>
                  </tr>
                  <!-- Order items will be injected here -->
                  <tbody id="order-items"></tbody>
            </div>
            <div class="flex justify-between gap-x-6 py-2">
              <p class="text-[#886364] text-sm font-normal leading-normal">Tax</p>
              <p class="text-[#181111] text-sm font-normal leading-normal text-right">$6.00</p>
            </div>
            <div class="flex justify-between gap-x-6 py-2 border-t border-dashed border-[#e5dcdc] mt-2 pt-4 font-bold">
              <p class="text-[#181111] text-base font-normal leading-normal">Total</p>
              <p class="text-[#181111] text-base font-normal leading-normal text-right">$81.00</p>
            </div>
          </section>

          <!-- Action buttons -->
          <div class="mt-6 flex flex-col md:flex-row gap-4 p-4 justify-center">
            <button id="track-order-btn"
              class="flex-1 w-full md:w-auto min-w-[150px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-12 px-6 bg-[#e92932] text-white text-base font-bold leading-normal tracking-[0.015em] transition-transform transform hover:scale-105 hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-[#e92932] focus:ring-offset-2"
            >
              <span class="truncate" onclick="window.location.href='trackOrder.html'">Track Order</span>
            </button>
            <button id="continue-shopping-btn"
              class="flex-1 w-full md:w-auto min-w-[150px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-12 px-6 bg-[#f4f0f0] text-[#181111] text-base font-bold leading-normal tracking-[0.015em] transition-transform transform hover:scale-105 hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-[#f4f0f0] focus:ring-offset-2"
            >
              <span class="truncate" onclick="window.location.href='product.html'">Continue Shopping</span>
            </button>
          </div>
        </div>
      </main>

      <!-- Custom message box (hidden by default) -->
      <div id="message-box" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 hidden transition-opacity duration-300">
        <div class="bg-white p-6 rounded-xl shadow-xl max-w-sm w-full mx-4 text-center">
          <h4 class="text-lg font-bold mb-2">Order Status</h4>
          <p id="message-content" class="text-gray-600 mb-4"></p>
          <button id="message-box-close" class="bg-[#e92932] text-white px-4 py-2 rounded-lg font-bold hover:bg-[#d0242a] transition-colors">
            Close
          </button>
        </div>
      </div>
    </div>

    <script>
      // Function to show the custom message box
      function showMessageBox(message) {
        const msgBox = document.getElementById('message-box');
        const msgContent = document.getElementById('message-content');
        msgContent.textContent = message;
        msgBox.classList.remove('hidden', 'opacity-0');
        msgBox.classList.add('opacity-100');
      }

      // Function to hide the custom message box
      function hideMessageBox() {
        const msgBox = document.getElementById('message-box');
        msgBox.classList.remove('opacity-100');
        msgBox.classList.add('opacity-0');
        setTimeout(() => {
          msgBox.classList.add('hidden');
        }, 300);
      }

      document.addEventListener('DOMContentLoaded', () => {
        // Fetch latest order (for demo, get last order)
        fetch('orders.php')
          .then(res => res.json())
          .then(data => {
            if (data.success && data.orders.length > 0) {
              const order = data.orders[data.orders.length - 1];
              document.getElementById('order-number').textContent = '#' + order.id;
              document.getElementById('order-confirm-msg').textContent = `Thank you, your order #${order.id} has been placed. Status: ${order.status}.`;
              // Fetch product name
              fetch('products.php')
                .then(res => res.json())
                .then(prodData => {
                  if (prodData.success) {
                    const items = data.orders.filter(o => o.id === order.id);
                    let itemsHtml = '';
                    items.forEach(item => {
                      const prod = prodData.products.find(p => p.id == item.product_id);
                      itemsHtml += `<tr>
                        <td class="px-4 py-3 text-[#181111] text-sm font-normal leading-normal">${prod ? prod.name : 'Product #' + item.product_id}</td>
                        <td class="px-4 py-3 text-[#181111] text-sm font-normal leading-normal">${item.quantity}</td>
                        <td class="px-4 py-3 text-[#181111] text-sm font-normal leading-normal">R${prod ? prod.price : '-'}</td>
                      </tr>`;
                    });
                    document.getElementById('order-items').innerHTML = itemsHtml;
                  }
                });
              }
          });
        // Track Order button
        const trackOrderBtn = document.getElementById('track-order-btn');
        if (trackOrderBtn) {
          trackOrderBtn.addEventListener('click', () => {
            showMessageBox('Tracking info: Your order is being processed!');
            window.location.href = 'trackOrder.html'; 
          });
        }
        // Continue Shopping button
        const continueShoppingBtn = document.getElementById('continue-shopping-btn');
        if (continueShoppingBtn) {
          continueShoppingBtn.addEventListener('click', () => {
            window.location.href = 'product.html'; 
          });
        }
        const copyOrderBtn = document.getElementById('copy-order');
        if (copyOrderBtn) {
          copyOrderBtn.addEventListener('click', () => {
            const orderNumberElement = document.getElementById('order-number');
            if (orderNumberElement) {
              const orderNumber = orderNumberElement.textContent;
              // Use document.execCommand('copy') as it works more reliably in iframes
              const tempInput = document.createElement('textarea');
              tempInput.value = orderNumber;
              document.body.appendChild(tempInput);
              tempInput.select();
              document.execCommand('copy');
              document.body.removeChild(tempInput);
              showMessageBox('Order number copied to clipboard!');
            }
          });
        }

        // Event listener for the close button on the message box
        const msgBoxCloseBtn = document.getElementById('message-box-close');
        if (msgBoxCloseBtn) {
          msgBoxCloseBtn.addEventListener('click', hideMessageBox);
        }
      });
    </script>
  </body>
</html>
