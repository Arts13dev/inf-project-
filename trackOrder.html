<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Crafty Corner - Track Order</title>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      rel="stylesheet"
      as="style"
      onload="this.rel='stylesheet'"
      href="https://fonts.googleapis.com/css2?display=swap&amp;family=Noto+Sans%3Awght%40400%3B500%3B700%3B900&amp;family=Work+Sans%3awght@400;500;700;900"
    />
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <style>
      /* Ensure the body takes up the full viewport height */
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
      body {
        font-family: "Work Sans", "Noto Sans", sans-serif;
      }
    </style>
  </head>
  <body class="bg-white">
    <!-- Main container for the entire page -->
    <div class="relative flex size-full min-h-screen flex-col group/design-root overflow-x-hidden">
      <!-- Header section -->
      <header class="flex items-center justify-between whitespace-nowrap border-b border-solid border-b-[#f4f0f0] px-6 md:px-10 py-3">
        <!-- Logo and brand name -->
        <div class="flex items-center gap-2 text-[#181111]">
          <div class="size-6">
            <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
              <g clip-path="url(#clip0_6_319)">
                <path
                  d="M8.57829 8.57829C5.52816 11.6284 3.451 15.5145 2.60947 19.7452C1.76794 23.9758 2.19984 28.361 3.85056 32.3462C5.50128 36.3314 8.29667 39.7376 11.8832 42.134C15.4698 44.5305 19.6865 45.8096 24 45.8096C28.3135 45.8096 32.5302 44.5305 36.1168 42.134C39.7033 39.7375 42.4987 36.3314 44.1494 32.3462C45.8002 28.361 46.2321 23.9758 45.3905 19.7452C44.549 15.5145 42.4718 11.6284 39.4217 8.57829L24 24L8.57829 8.57829Z"
                  fill="currentColor"
                ></path>
              </g>
              <defs>
                <clipPath id="clip0_6_319"><rect width="48" height="48" fill="white"></rect></clipPath>
              </defs>
            </svg>
          </div>
          <h2 class="text-[#181111] text-lg font-bold leading-tight tracking-[-0.015em]">Crafty Corner</h2>
        </div>
        <!-- Navigation links and action buttons -->
        <div class="flex flex-1 justify-end gap-4 md:gap-8 items-center">
          <div class="hidden md:flex items-center gap-4 lg:gap-6">
            <a class="text-[#181111] text-sm font-medium leading-normal" href="#">New Arrivals</a>
            <a class="text-[#181111] text-sm font-medium leading-normal" href="#">Shop</a>
            <a class="text-[#181111] text-sm font-medium leading-normal" href="#">About</a>
            <a class="text-[#181111] text-sm font-medium leading-normal" href="#">Contact</a>
          </div>
          <div class="flex gap-2">
            <!-- Search button -->
            <button
              class="flex size-10 cursor-pointer items-center justify-center rounded-lg bg-[#f4f0f0] text-[#181111] transition-colors duration-200 ease-in-out hover:bg-[#e0d9d9]"
            >
              <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" fill="currentColor" viewBox="0 0 256 256">
                <path d="M229.66,218.34l-50.07-50.06a88.11,88.11,0,1,0-11.31,11.31l50.06,50.07a8,8,0,0,0,11.32-11.32ZM40,112a72,72,0,1,1,72,72A72.08,72.08,0,0,1,40,112Z"></path>
              </svg>
            </button>
            <!-- User button -->
            <button
              class="flex size-10 cursor-pointer items-center justify-center rounded-lg bg-[#f4f0f0] text-[#181111] transition-colors duration-200 ease-in-out hover:bg-[#e0d9d9]"
            >
              <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" fill="currentColor" viewBox="0 0 256 256">
                <path d="M230.92,212c-15.23-26.33-38.7-45.21-66.09-54.16a72,72,0,1,0-73.66,0C63.78,166.78,40.31,185.66,25.08,212a8,8,0,1,0,13.85,8c18.84-32.56,52.14-52,89.07-52s70.23,19.44,89.07,52a8,8,0,1,0,13.85-8ZM72,96a56,56,0,1,1,56,56A56.06,56.06,0,0,1,72,96Z"></path>
              </svg>
            </button>
            <!-- Shopping bag button -->
            <button
              class="flex size-10 cursor-pointer items-center justify-center rounded-lg bg-[#f4f0f0] text-[#181111] transition-colors duration-200 ease-in-out hover:bg-[#e0d9d9]"
            >
              <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" fill="currentColor" viewBox="0 0 256 256">
                <path d="M216,40H40A16,16,0,0,0,24,56V200a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A16,16,0,0,0,216,40Zm0,160H40V56H216V200ZM176,88a48,48,0,0,1-96,0,8,8,0,0,1,16,0,32,32,0,0,0,64,0,8,8,0,0,1,16,0Z"></path>
              </svg>
            </button>
          </div>
        </div>
      </header>
      <!-- Main content container -->
      <main class="flex flex-1 justify-center py-5 px-4 md:px-10">
        <div class="layout-content-container flex flex-col max-w-[960px] flex-1">
          <!-- Order tracking header -->
          <section class="p-4 md:p-6 bg-[#f8f5f5] rounded-xl mb-6">
            <h1 class="text-[#181111] tracking-light text-[28px] md:text-[32px] font-bold leading-tight">Track Your Order</h1>
            <form id="trackOrderForm" class="flex gap-2 mt-2">
              <input type="text" id="orderIdInput" placeholder="Enter Order ID" class="border px-2 py-1 rounded" />
              <button type="submit" class="bg-blue-500 text-white px-4 py-1 rounded">Track</button>
            </form>
            <p class="text-[#886364] text-sm md:text-base font-normal leading-normal mt-2">
              Order #<span id="tracking-order-number">-</span> status: <span id="tracking-order-status">-</span>
            </p>
          </section>

          <!-- Order progress timeline -->
          <section class="p-4 bg-white rounded-xl shadow-sm mb-6">
            <h3 class="text-[#181111] text-lg font-bold leading-tight tracking-[-0.015em] pb-4">Status: <span id="order-status-text" class="text-[#e92932]">Confirmed</span></h3>
            <div class="flex justify-between items-center relative">
              <!-- Timeline line -->
              <div class="absolute top-1/2 left-0 w-full h-1 bg-[#f4f0f0] -z-10"></div>
              <!-- Active timeline line (filled with color) -->
              <div id="progress-line" class="absolute top-1/2 left-0 h-1 bg-[#e92932] -z-10 transition-all duration-500 ease-in-out"></div>
              
              <!-- Timeline steps -->
              <div class="flex flex-col items-center flex-1 z-10 text-center">
                <div id="step-1" class="flex items-center justify-center size-8 md:size-10 rounded-full bg-[#e92932] text-white font-bold transition-colors duration-500">
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 256 256"><path d="M224,48V208a16,16,0,0,1-16,16H48a16,16,0,0,1-16-16V48A16,16,0,0,1,48,32H208A16,16,0,0,1,224,48ZM128,152a8,8,0,0,0-8,8v16a8,8,0,0,0,16,0V160A8,8,0,0,0,128,152Zm-40-8a8,8,0,0,0-8,8v16a8,8,0,0,0,16,0V152A8,8,0,0,0,88,144Zm80,0a8,8,0,0,0-8,8v16a8,8,0,0,0,16,0V152A8,8,0,0,0,168,144ZM128,80a8,8,0,0,0-8,8v16a8,8,0,0,0,16,0V88A8,8,0,0,0,128,80Zm-40,0a8,8,0,0,0-8,8v16a8,8,0,0,0,16,0V88A8,8,0,0,0,88,80Zm80,0a8,8,0,0,0-8,8v16a8,8,0,0,0,16,0V88A8,8,0,0,0,168,80Z"></path></svg>
                </div>
                <p class="text-xs md:text-sm text-[#181111] mt-2 font-medium">Confirmed</p>
              </div>
              
              <div class="flex flex-col items-center flex-1 z-10 text-center">
                <div id="step-2" class="flex items-center justify-center size-8 md:size-10 rounded-full bg-[#f4f0f0] text-gray-400 transition-colors duration-500">
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 256 256"><path d="M224,80H176V56a24,24,0,0,0-24-24H104a24,24,0,0,0-24,24V80H32a16,16,0,0,0-16,16v88a16,16,0,0,0,16,16H224a16,16,0,0,0,16-16V96A16,16,0,0,0,224,80ZM96,56a8,8,0,0,1,8-8h48a8,8,0,0,1,8,8V80H96ZM224,184a8,8,0,0,1-8,8H32a8,8,0,0,1-8-8V96a8,8,0,0,1,8-8H80v16a8,8,0,0,0,16,0V88h64v16a8,8,0,0,0,16,0V88h48a8,8,0,0,1,8,8Z"></path></svg>
                </div>
                <p class="text-xs md:text-sm text-gray-400 mt-2 font-medium">Shipped</p>
              </div>

              <div class="flex flex-col items-center flex-1 z-10 text-center">
                <div id="step-3" class="flex items-center justify-center size-8 md:size-10 rounded-full bg-[#f4f0f0] text-gray-400 transition-colors duration-500">
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 256 256"><path d="M224,96h-16V56a24,24,0,0,0-24-24H72a24,24,0,0,0-24,24V96H32a16,16,0,0,0-16,16v80a16,16,0,0,0,16,16H224a16,16,0,0,0,16-16V112A16,16,0,0,0,224,96Zm-80,88H112a8,8,0,0,1,0-16h32a8,8,0,0,1,0,16Zm16-48a8,8,0,0,1-8,8H112a8,8,0,0,1,0-16h32A8,8,0,0,1,160,136ZM64,56a8,8,0,0,1,8-8h96a8,8,0,0,1,8,8V96H64ZM224,208H32V112H48v80a8,8,0,0,0,16,0V112h96v80a8,8,0,0,0,16,0V112h16Z"></path></svg>
                </div>
                <p class="text-xs md:text-sm text-gray-400 mt-2 font-medium">In Transit</p>
              </div>
              
              <div class="flex flex-col items-center flex-1 z-10 text-center">
                <div id="step-4" class="flex items-center justify-center size-8 md:size-10 rounded-full bg-[#f4f0f0] text-gray-400 transition-colors duration-500">
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 256 256"><path d="M224.49,136.49l-72,72A12,12,0,0,1,144,216a12,12,0,0,1-8.49-3.51l-32-32a12,12,0,0,1,17-17L144,187.06,207.51,123.51A12,12,0,0,1,224.49,136.49ZM104,152a12,12,0,0,0,12-12V56a12,12,0,0,0-24,0v84A12,12,0,0,0,104,152ZM48,152a12,12,0,0,0,12-12V56a12,12,0,0,0-24,0v84A12,12,0,0,0,48,152Zm120,48a12,12,0,0,0-12-12H48a12,12,0,0,0,0,24h108A12,12,0,0,0,168,200Z"></path></svg>
                </div>
                <p class="text-xs md:text-sm text-gray-400 mt-2 font-medium">Delivered</p>
              </div>
            </div>
            
            <p class="text-[#886364] text-sm md:text-base font-normal leading-normal mt-6 text-center">
              Estimated Delivery: <span id="estimated-delivery-date" class="font-bold text-[#181111]">July 30 - August 2, 2024</span>
            </p>
          </section>

          <!-- Order details section -->
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <section class="p-4 bg-white rounded-xl shadow-sm">
              <h3 class="text-[#181111] text-lg font-bold leading-tight tracking-[-0.015em] pb-2">Order Details</h3>
              <div class="flex justify-between gap-x-6 py-2">
                <p class="text-[#886364] text-sm font-normal leading-normal">Order Date</p>
                <p class="text-[#181111] text-sm font-normal leading-normal text-right">July 26, 2024</p>
              </div>
              <h3 class="text-[#181111] text-lg font-bold leading-tight tracking-[-0.015em] pt-4 pb-2">Shipping Address</h3>
              <p class="text-[#181111] text-sm md:text-base font-normal leading-normal">
                Sarah Miller<br />
                123 Maple Street<br />
                Anytown, CA 91234
              </p>
            </section>
            
            <section class="p-4 bg-white rounded-xl shadow-sm">
              <h3 class="text-[#181111] text-lg font-bold leading-tight tracking-[-0.015em] pb-2">Items Purchased</h3>
              <div class="flex justify-between gap-x-6 py-2">
                <p class="text-[#886364] text-sm font-normal leading-normal">Handmade Ceramic Mug</p>
                <p class="text-[#181111] text-sm font-normal leading-normal text-right">x1 ($25.00)</p>
              </div>
              <div class="flex justify-between gap-x-6 py-2">
                <p class="text-[#886364] text-sm font-normal leading-normal">Knitted Wool Scarf</p>
                <p class="text-[#181111] text-sm font-normal leading-normal text-right">x1 ($45.00)</p>
              </div>
              <h3 class="text-[#181111] text-lg font-bold leading-tight tracking-[-0.015em] pt-4 pb-2">Order Total</h3>
              <p class="text-[#181111] text-sm md:text-base font-normal leading-normal">$81.00</p>
            </section>
          </div>

          <!-- Action buttons -->
          <div class="mt-6 flex flex-col md:flex-row gap-4 p-4 justify-center">
            <button id="continue-shopping-btn"
              class="flex-1 w-full md:w-auto min-w-[150px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-12 px-6 bg-[#f4f0f0] text-[#181111] text-base font-bold leading-normal tracking-[0.015em] transition-transform transform hover:scale-105 hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-[#f4f0f0] focus:ring-offset-2"
            >
              <span class="truncate" onclick="window.location.href='product.html'">Continue Shopping</span>
            </button>
          </div>
        </div>
      </main>
    </div>

    <script>
      // Function to show the custom message box
      function showMessageBox(message) {
        const msgBox = document.getElementById('message-box');
        const msgContent = document.getElementById('message-content');
        msgContent.textContent = message;
        msgBox.classList.remove('hidden', 'opacity-0');
        msgBox.classList.add('opacity-100');
      }

      // Function to hide the custom message box
      function hideMessageBox() {
        const msgBox = document.getElementById('message-box');
        msgBox.classList.remove('opacity-100');
        msgBox.classList.add('opacity-0');
        setTimeout(() => {
          msgBox.classList.add('hidden');
        }, 300);
      }

      // Define the tracking steps and their corresponding progress line width
      const trackingSteps = ['confirmed', 'shipped', 'in-transit', 'delivered'];
      const progressWidths = ['0%', '33.3%', '66.6%', '100%'];
      
      // Function to update the tracking UI based on the current status
      function updateTrackingStatus(currentStatus) {
        // Find the index of the current status
        const currentIndex = trackingSteps.indexOf(currentStatus.toLowerCase());
        
        if (currentIndex === -1) {
          console.error("Invalid tracking status provided.");
          return;
        }

        // Update the progress line width
        const progressLine = document.getElementById('progress-line');
        progressLine.style.width = progressWidths[currentIndex];

        // Update the step colors and text
        trackingSteps.forEach((step, index) => {
          const stepElement = document.getElementById(`step-${index + 1}`);
          const stepTextElement = stepElement.nextElementSibling;
          
          if (index <= currentIndex) {
            // This step and all previous steps are active
            stepElement.classList.remove('bg-[#f4f0f0]', 'text-gray-400');
            stepElement.classList.add('bg-[#e92932]', 'text-white');
            stepTextElement.classList.remove('text-gray-400');
            stepTextElement.classList.add('text-[#181111]');
          } else {
            // This step is not yet active
            stepElement.classList.remove('bg-[#e92932]', 'text-white');
            stepElement.classList.add('bg-[#f4f0f0]', 'text-gray-400');
            stepTextElement.classList.remove('text-[#181111]');
            stepTextElement.classList.add('text-gray-400');
          }
        });
        
        // Update the main status text
        const statusText = document.getElementById('order-status-text');
        statusText.textContent = currentStatus.charAt(0).toUpperCase() + currentStatus.slice(1);
      }

      document.addEventListener('DOMContentLoaded', () => {
        document.getElementById('trackOrderForm').addEventListener('submit', function(e) {
          e.preventDefault();
          const orderId = document.getElementById('orderIdInput').value.trim();
          if (!orderId) return;
          fetch(`track_order.php?order_id=${orderId}`)
            .then(res => res.json())
            .then(data => {
              document.getElementById('tracking-order-number').textContent = orderId;
              if (data.success) {
                updateTrackingStatus(data.status);
                document.getElementById('tracking-order-status').textContent = data.status;
              } else {
                updateTrackingStatus('unknown');
                document.getElementById('tracking-order-status').textContent = data.message;
              }
            })
            .catch(() => {
              updateTrackingStatus('unknown');
              document.getElementById('tracking-order-status').textContent = 'Error fetching order.';
            });
        });
        // Default status
        updateTrackingStatus('confirmed');
        // Continue Shopping button
        const continueShoppingBtn = document.getElementById('continue-shopping-btn');
        if (continueShoppingBtn) {
          continueShoppingBtn.addEventListener('click', () => {
            window.location.href = 'product.html';
          });
        }
      });
    </script>
  </body>
</html>
